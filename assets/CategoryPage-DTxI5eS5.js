import{A as _e,C as fe,D as Q,E as je,F as k,G as Xe,H as Ye,J as Ke,K as qe,L as Re,c as j,n as D,M as Ie,m as q,d as X,N as ve,O as he,h as A,P as $e,e as ge,Q as Be,R as L,S as oe,T as ie,U as F,V as M,W as pe,X as Ge,a as h,w as ee,Y as ce,Z as Ae,$ as te,t as G,a0 as Pe,u as Oe,a1 as Je,a2 as Qe,b as ye,a3 as le,a4 as et,a5 as ze,a6 as xe,a7 as tt,a8 as nt,k as at,r as ot,a9 as it,f as Le,aa as lt,ab as st,ac as ct,ad as rt,ae as dt,af as ut,ag as ft,ah as vt,j as ht,ai as we,aj as gt,ak as mt,al as bt,am as yt,an as Ee,ao as xt,ap as wt,aq as Tt,ar as St,l as Te,o as J,q as re,as as Ct,at as kt,au as Se,av as _t,s as Rt,aw as It}from"./index-CL_MJS_C.js";import{S as $t,a as Bt}from"./index-57MEWi7j.js";import{_ as pt}from"./index-DbVoNA3g.js";function At(e,i,n){let o,r=0;const t=e.scrollLeft,s=n===0?1:Math.round(n*1e3/16);function c(){_e(o)}function l(){e.scrollLeft+=(i-t)/s,++r<s&&(o=fe(l))}return l(),c}function Pt(e,i,n,o){let r,t=Q(e);const s=t<i,c=n===0?1:Math.round(n*1e3/16),l=(i-t)/c;function y(){_e(r)}function m(){t+=l,(s&&t>i||!s&&t<i)&&(t=i),je(e,t),s&&t<i||!s&&t>i?r=fe(m):o&&(r=fe(o))}return m(),y}function Ot(){const e=k([]),i=[];return Xe(()=>{e.value=[]}),[e,o=>(i[o]||(i[o]=r=>{e.value[o]=r}),i[o])]}function Ne(e,i){if(!Ye||!window.IntersectionObserver)return;const n=new IntersectionObserver(t=>{i(t[0].intersectionRatio>0)},{root:document.body}),o=()=>{e.value&&n.observe(e.value)},r=()=>{e.value&&n.unobserve(e.value)};Ke(r),qe(r),Re(o)}const[zt,Lt]=j("sticky"),Et={zIndex:D,position:Ie("top"),container:Object,offsetTop:q(0),offsetBottom:q(0)};var Nt=X({name:zt,props:Et,emits:["scroll","change"],setup(e,{emit:i,slots:n}){const o=k(),r=ve(o),t=he({fixed:!1,width:0,height:0,transform:0}),s=k(!1),c=A(()=>$e(e.position==="top"?e.offsetTop:e.offsetBottom)),l=A(()=>{if(s.value)return;const{fixed:v,height:R,width:f}=t;if(v)return{width:`${f}px`,height:`${R}px`}}),y=A(()=>{if(!t.fixed||s.value)return;const v=ge(Be(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(v.transform=`translate3d(0, ${t.transform}px, 0)`),v}),m=v=>i("scroll",{scrollTop:v,isFixed:t.fixed}),_=()=>{if(!o.value||ie(o))return;const{container:v,position:R}=e,f=M(o),C=Q(window);if(t.width=f.width,t.height=f.height,R==="top")if(v){const u=M(v),P=u.bottom-c.value-t.height;t.fixed=c.value>f.top&&u.bottom>0,t.transform=P<0?P:0}else t.fixed=c.value>f.top;else{const{clientHeight:u}=document.documentElement;if(v){const P=M(v),b=u-P.top-c.value-t.height;t.fixed=u-c.value<f.bottom&&u>P.top,t.transform=b<0?-b:0}else t.fixed=u-c.value<f.bottom}m(C)};return L(()=>t.fixed,v=>i("change",v)),oe("scroll",_,{target:r,passive:!0}),Ne(o,_),L([pe,Ge],()=>{!o.value||ie(o)||!t.fixed||(s.value=!0,F(()=>{const v=M(o);t.width=v.width,t.height=v.height,s.value=!1}))}),()=>{var v;return h("div",{ref:o,style:l.value},[h("div",{class:Lt({fixed:t.fixed&&!s.value}),style:y.value},[(v=n.default)==null?void 0:v.call(n)])])}}});const Ht=ee(Nt),[Mt,Ce]=j("tabs");var Dt=X({name:Mt,props:{count:ce(Number),inited:Boolean,animated:Boolean,duration:ce(D),swipeable:Boolean,lazyRender:Boolean,currentIndex:ce(Number)},emits:["change"],setup(e,{emit:i,slots:n}){const o=k(),r=c=>i("change",c),t=()=>{var c;const l=(c=n.default)==null?void 0:c.call(n);return e.animated||e.swipeable?h($t,{ref:o,loop:!1,class:Ce("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:r},{default:()=>[l]}):l},s=c=>{const l=o.value;l&&l.state.active!==c&&l.swipeTo(c,{immediate:!e.inited})};return L(()=>e.currentIndex,s),Ae(()=>{s(e.currentIndex)}),te({swipeRef:o}),()=>h("div",{class:Ce("content",{animated:e.animated||e.swipeable})},[t()])}});const[He,ae]=j("tabs"),Vt={type:Ie("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:q(0),duration:q(.3),animated:Boolean,ellipsis:G,swipeable:Boolean,scrollspy:Boolean,offsetTop:q(0),background:String,lazyRender:G,showHeader:G,lineWidth:D,lineHeight:D,beforeChange:Function,swipeThreshold:q(5),titleActiveColor:String,titleInactiveColor:String},Me=Symbol(He);var Wt=X({name:He,props:Vt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:i,slots:n}){let o,r,t,s,c;const l=k(),y=k(),m=k(),_=k(),v=Pe(),R=ve(l),[f,C]=Ot(),{children:u,linkChildren:P}=Oe(Me),b=he({inited:!1,position:"",lineStyle:{},currentIndex:-1}),V=A(()=>u.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Y=A(()=>({borderColor:e.color,background:e.background})),W=(a,d)=>{var x;return(x=a.name)!=null?x:d},K=A(()=>{const a=u[b.currentIndex];if(a)return W(a,b.currentIndex)}),N=A(()=>$e(e.offsetTop)),g=A(()=>e.sticky?N.value+o:0),w=a=>{const d=y.value,x=f.value;if(!V.value||!d||!x||!x[b.currentIndex])return;const B=x[b.currentIndex].$el,I=B.offsetLeft-(d.offsetWidth-B.offsetWidth)/2;s&&s(),s=At(d,I,a?0:+e.duration)},T=()=>{const a=b.inited;F(()=>{const d=f.value;if(!d||!d[b.currentIndex]||e.type!=="line"||ie(l.value))return;const x=d[b.currentIndex].$el,{lineWidth:B,lineHeight:I}=e,z=x.offsetLeft+x.offsetWidth/2,U={width:ye(B),backgroundColor:e.color,transform:`translateX(${z}px) translateX(-50%)`};if(a&&(U.transitionDuration=`${e.duration}s`),le(I)){const ne=ye(I);U.height=ne,U.borderRadius=ne}b.lineStyle=U})},$=a=>{const d=a<b.currentIndex?-1:1;for(;a>=0&&a<u.length;){if(!u[a].disabled)return a;a+=d}},S=(a,d)=>{const x=$(a);if(!le(x))return;const B=u[x],I=W(B,x),z=b.currentIndex!==null;b.currentIndex!==x&&(b.currentIndex=x,d||w(),T()),I!==e.active&&(i("update:active",I),z&&i("change",I,B.title)),t&&!e.scrollspy&&ze(Math.ceil(xe(l.value)-N.value))},p=(a,d)=>{const x=u.find((I,z)=>W(I,z)===a),B=x?u.indexOf(x):0;S(B,d)},H=(a=!1)=>{if(e.scrollspy){const d=u[b.currentIndex].$el;if(d&&R.value){const x=xe(d,R.value)-g.value;r=!0,c&&c(),c=Pt(R.value,x,a?0:+e.duration,()=>{r=!1})}}},E=(a,d,x)=>{const{title:B,disabled:I}=u[d],z=W(u[d],d);I||(tt(e.beforeChange,{args:[z],done:()=>{S(d),H()}}),nt(a)),i("clickTab",{name:z,title:B,event:x,disabled:I})},O=a=>{t=a.isFixed,i("scroll",a)},se=a=>{F(()=>{p(a),H(!0)})},Z=()=>{for(let a=0;a<u.length;a++){const{top:d}=M(u[a].$el);if(d>g.value)return a===0?0:a-1}return u.length-1},We=()=>{if(e.scrollspy&&!r){const a=Z();S(a)}},Fe=()=>{if(e.type==="line"&&u.length)return h("div",{class:ae("line"),style:b.lineStyle},null)},me=()=>{var a,d,x;const{type:B,border:I,sticky:z}=e,U=[h("div",{ref:z?void 0:m,class:[ae("wrap"),{[et]:B==="line"&&I}]},[h("div",{ref:y,role:"tablist",class:ae("nav",[B,{shrink:e.shrink,complete:V.value}]),style:Y.value,"aria-orientation":"horizontal"},[(a=n["nav-left"])==null?void 0:a.call(n),u.map(ne=>ne.renderTitle(E)),Fe(),(d=n["nav-right"])==null?void 0:d.call(n)])]),(x=n["nav-bottom"])==null?void 0:x.call(n)];return z?h("div",{ref:m},[U]):U},be=()=>{T(),F(()=>{var a,d;w(!0),(d=(a=_.value)==null?void 0:a.swipeRef.value)==null||d.resize()})};L(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],T),L(pe,be),L(()=>e.active,a=>{a!==K.value&&p(a)}),L(()=>u.length,()=>{b.inited&&(p(e.active),T(),F(()=>{w(!0)}))});const Ze=()=>{p(e.active,!0),F(()=>{b.inited=!0,m.value&&(o=M(m.value).height),w(!0)})},Ue=(a,d)=>i("rendered",a,d);return te({resize:be,scrollTo:se}),Je(T),Qe(T),Re(Ze),Ne(l,T),oe("scroll",We,{target:R,passive:!0}),P({id:v,props:e,setLine:T,scrollable:V,onRendered:Ue,currentName:K,setTitleRefs:C,scrollIntoView:w}),()=>h("div",{ref:l,class:ae([e.type])},[e.showHeader?e.sticky?h(Ht,{container:l.value,offsetTop:N.value,onScroll:O},{default:()=>[me()]}):me():null,h(Dt,{ref:_,count:u.length,inited:b.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:b.currentIndex,onChange:S},{default:()=>{var a;return[(a=n.default)==null?void 0:a.call(n)]}})])}});const Ft=Symbol(),[Zt,ke]=j("tab"),Ut=X({name:Zt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:D,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:G},setup(e,{slots:i}){const n=A(()=>{const r={},{type:t,color:s,disabled:c,isActive:l,activeColor:y,inactiveColor:m}=e;s&&t==="card"&&(r.borderColor=s,c||(l?r.backgroundColor=s:r.color=s));const v=l?y:m;return v&&(r.color=v),r}),o=()=>{const r=h("span",{class:ke("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||le(e.badge)&&e.badge!==""?h(at,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[r]}):r};return()=>h("div",{id:e.id,role:"tab",class:[ke([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:n.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[o()])}}),[jt,de]=j("tab"),Xt=ge({},ot,{dot:Boolean,name:D,badge:D,title:String,disabled:Boolean,titleClass:it,titleStyle:[String,Object],showZeroBadge:G});var Yt=X({name:jt,props:Xt,setup(e,{slots:i}){const n=Pe(),o=k(!1),r=gt(),{parent:t,index:s}=Le(Me);if(!t)return;const c=()=>{var f;return(f=e.name)!=null?f:s.value},l=()=>{o.value=!0,t.props.lazyRender&&F(()=>{t.onRendered(c(),e.title)})},y=A(()=>{const f=c()===t.currentName.value;return f&&!o.value&&l(),f}),m=k(""),_=k("");lt(()=>{const{titleClass:f,titleStyle:C}=e;m.value=f?ut(f):"",_.value=C&&typeof C!="string"?ft(vt(C)):C});const v=f=>h(Ut,ht({key:n,id:`${t.id}-${s.value}`,ref:t.setTitleRefs(s.value),style:_.value,class:m.value,isActive:y.value,controls:n,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:C=>f(r.proxy,s.value,C)},we(t.props,["type","color","shrink"]),we(e,["dot","badge","title","disabled","showZeroBadge"])),{title:i.title}),R=k(!y.value);return L(y,f=>{f?R.value=!1:st(()=>{R.value=!0})}),L(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),ct(Ft,y),te({id:n,renderTitle:v}),()=>{var f;const C=`${t.id}-${s.value}`,{animated:u,swipeable:P,scrollspy:b,lazyRender:V}=t.props;if(!i.default&&!u)return;const Y=b||y.value;if(u||P)return h(Bt,{id:n,role:"tabpanel",class:de("panel-wrapper",{inactive:R.value}),tabindex:y.value?0:-1,"aria-hidden":!y.value,"aria-labelledby":C},{default:()=>{var N;return[h("div",{class:de("panel")},[(N=i.default)==null?void 0:N.call(i)])]}});const K=o.value||b||!V?(f=i.default)==null?void 0:f.call(i):null;return rt(h("div",{id:n,role:"tabpanel",class:de("panel"),tabindex:Y?0:-1,"aria-labelledby":C},[K]),[[dt,Y]])}}});const Kt=ee(Yt),qt=ee(Wt);function Gt(){return Array(26).fill("").map((n,o)=>String.fromCharCode(65+o))}const[De,ue]=j("index-bar"),Jt={sticky:G,zIndex:D,teleport:[String,Object],highlightColor:String,stickyOffsetTop:yt(0),indexList:{type:Array,default:Gt}},Ve=Symbol(De);var Qt=X({name:De,props:Jt,emits:["select","change"],setup(e,{emit:i,slots:n}){const o=k(),r=k(),t=k(""),s=mt(),c=ve(o),{children:l,linkChildren:y}=Oe(Ve);let m;y({props:e});const _=A(()=>{if(le(e.zIndex))return{zIndex:+e.zIndex+1}}),v=A(()=>{if(e.highlightColor)return{color:e.highlightColor}}),R=(g,w)=>{for(let T=l.length-1;T>=0;T--){const $=T>0?w[T-1].height:0,S=e.sticky?$+e.stickyOffsetTop:0;if(g+S>=w[T].top)return T}return-1},f=g=>l.find(w=>String(w.index)===g),C=()=>{if(ie(o))return;const{sticky:g,indexList:w}=e,T=Q(c.value),$=M(c),S=l.map(H=>H.getRect(c.value,$));let p=-1;if(m){const H=f(m);if(H){const E=H.getRect(c.value,$);p=R(E.top,S)}}else p=R(T,S);t.value=w[p],g&&l.forEach((H,E)=>{const{state:O,$el:se}=H;if(E===p||E===p-1){const Z=se.getBoundingClientRect();O.left=Z.left,O.width=Z.width}else O.left=null,O.width=null;if(E===p)O.active=!0,O.top=Math.max(e.stickyOffsetTop,S[E].top-T)+$.top;else if(E===p-1&&m===""){const Z=S[p].top-T;O.active=Z>0,O.top=Z+$.top-S[E].height}else O.active=!1}),m=""},u=()=>{F(C)};oe("scroll",C,{target:c,passive:!0}),Ae(u),L(()=>e.indexList,u),L(t,g=>{g&&i("change",g)});const P=()=>e.indexList.map(g=>{const w=g===t.value;return h("span",{class:ue("index",{active:w}),style:w?v.value:void 0,"data-index":g},[g])}),b=g=>{m=String(g);const w=f(m);if(w){const T=Q(c.value),$=M(c),{offsetHeight:S}=document.documentElement;if(w.$el.scrollIntoView(),T===S-$.height){C();return}e.sticky&&e.stickyOffsetTop&&ze(Ee()-e.stickyOffsetTop),i("select",w.index)}},V=g=>{const{index:w}=g.dataset;w&&b(w)},Y=g=>{V(g.target)};let W;const K=g=>{if(s.move(g),s.isVertical()){xt(g);const{clientX:w,clientY:T}=g.touches[0],$=document.elementFromPoint(w,T);if($){const{index:S}=$.dataset;S&&W!==S&&(W=S,V($))}}},N=()=>h("div",{ref:r,class:ue("sidebar"),style:_.value,onClick:Y,onTouchstartPassive:s.start},[P()]);return te({scrollTo:b}),oe("touchmove",K,{target:r}),()=>{var g;return h("div",{ref:o,class:ue()},[e.teleport?h(bt,{to:e.teleport},{default:()=>[N()]}):N(),(g=n.default)==null?void 0:g.call(n)])}}});const[en,tn]=j("index-anchor"),nn={index:D};var an=X({name:en,props:nn,setup(e,{slots:i}){const n=he({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),o=k(),{parent:r}=Le(Ve);if(!r)return;const t=()=>n.active&&r.props.sticky,s=A(()=>{const{zIndex:l,highlightColor:y}=r.props;if(t())return ge(Be(l),{left:n.left?`${n.left}px`:void 0,width:n.width?`${n.width}px`:void 0,transform:n.top?`translate3d(0, ${n.top}px, 0)`:void 0,color:y})});return te({state:n,getRect:(l,y)=>{const m=M(o);return n.rect.height=m.height,l===window||l===document.body?n.rect.top=m.top+Ee():n.rect.top=m.top+Q(l)-y.top,n.rect}}),()=>{const l=t();return h("div",{ref:o,style:{height:l?`${n.rect.height}px`:void 0}},[h("div",{style:s.value,class:[tn({sticky:l}),{[wt]:l}]},[i.default?i.default():e.index])])}}});const on=ee(an),ln=ee(Qt),dn={__name:"CategoryPage",setup(e){const{artistsList:i}=Tt(),n=St(),o=k(0);return(r,t)=>{const s=on,c=It,l=ln,y=Kt,m=qt;return re(),Te(pt,{"is-search":!0},{default:J(()=>[h(m,{active:o.value,"onUpdate:active":t[0]||(t[0]=_=>o.value=_)},{default:J(()=>[h(y,{title:"歌手"},{default:J(()=>[h(l,null,{default:J(()=>[h(s,{index:"A"}),(re(!0),Ct(_t,null,kt(Se(i),_=>(re(),Te(c,{onClick:v=>Se(n).push(`/artist/${_.id}`),title:_.name},null,8,["onClick","title"]))),256))]),_:1})]),_:1}),h(y,{title:"歌曲"},{default:J(()=>[Rt("内容 2")]),_:1})]),_:1},8,["active"])]),_:1})}}};export{dn as default};
