import{K as Oe,L as me,M as ee,N as Qe,o as T,O as et,P as tt,Q as nt,R as at,S as ze,c as E,n as B,T as ce,m as q,d as N,U as be,V as ye,h as P,W as Le,e as we,X as We,Y as W,Z as le,$ as ie,a0 as Z,a1 as F,a2 as Ee,a3 as ot,a as u,w as U,a4 as ue,a5 as xe,a6 as te,t as K,a7 as Ne,u as De,a8 as lt,a9 as it,b as re,aa as se,ab as rt,ac as He,ad as Te,ae as st,af as ct,k as dt,r as ut,ag as ft,f as Me,ah as vt,ai as ht,aj as mt,ak as gt,al as bt,am as yt,an as wt,ao as xt,j as Fe,ap as Ce,aq as St,ar as _t,as as kt,at as Tt,au as Ue,av as Ct,aw as Rt,ax as $t,F as ge,ay as It,l as Bt,p as Re,q as Q,x as ae,C as $e,D as Ie,y as Be,A as fe,G as At,az as pt}from"./index-BXVa5rxE.js";import{S as Pt,a as Ot}from"./index-D9qYgkH3.js";import{_ as zt}from"./index-CMj-jexl.js";function Lt(e,a,n){let l,s=0;const t=e.scrollLeft,c=n===0?1:Math.round(n*1e3/16);function r(){Oe(l)}function i(){e.scrollLeft+=(a-t)/c,++s<c&&(l=me(i))}return i(),r}function Wt(e,a,n,l){let s,t=ee(e);const c=t<a,r=n===0?1:Math.round(n*1e3/16),i=(a-t)/r;function v(){Oe(s)}function b(){t+=i,(c&&t>a||!c&&t<a)&&(t=a),Qe(e,t),c&&t<a||!c&&t>a?s=me(b):l&&(s=me(l))}return b(),v}function Et(){const e=T([]),a=[];return et(()=>{e.value=[]}),[e,l=>(a[l]||(a[l]=s=>{e.value[l]=s}),a[l])]}function Ve(e,a){if(!tt||!window.IntersectionObserver)return;const n=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&n.observe(e.value)},s=()=>{e.value&&n.unobserve(e.value)};nt(s),at(s),ze(l)}const[Nt,Dt]=E("sticky"),Ht={zIndex:B,position:ce("top"),container:Object,offsetTop:q(0),offsetBottom:q(0)};var Mt=N({name:Nt,props:Ht,emits:["scroll","change"],setup(e,{emit:a,slots:n}){const l=T(),s=be(l),t=ye({fixed:!1,width:0,height:0,transform:0}),c=T(!1),r=P(()=>Le(e.position==="top"?e.offsetTop:e.offsetBottom)),i=P(()=>{if(c.value)return;const{fixed:h,height:C,width:d}=t;if(h)return{width:`${d}px`,height:`${C}px`}}),v=P(()=>{if(!t.fixed||c.value)return;const h=we(We(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${r.value}px`});return t.transform&&(h.transform=`translate3d(0, ${t.transform}px, 0)`),h}),b=h=>a("scroll",{scrollTop:h,isFixed:t.fixed}),A=()=>{if(!l.value||ie(l))return;const{container:h,position:C}=e,d=F(l),_=ee(window);if(t.width=d.width,t.height=d.height,C==="top")if(h){const m=F(h),O=m.bottom-r.value-t.height;t.fixed=r.value>d.top&&m.bottom>0,t.transform=O<0?O:0}else t.fixed=r.value>d.top;else{const{clientHeight:m}=document.documentElement;if(h){const O=F(h),y=m-O.top-r.value-t.height;t.fixed=m-r.value<d.bottom&&m>O.top,t.transform=y<0?-y:0}else t.fixed=m-r.value<d.bottom}b(_)};return W(()=>t.fixed,h=>a("change",h)),le("scroll",A,{target:s,passive:!0}),Ve(l,A),W([Ee,ot],()=>{!l.value||ie(l)||!t.fixed||(c.value=!0,Z(()=>{const h=F(l);t.width=h.width,t.height=h.height,c.value=!1}))}),()=>{var h;return u("div",{ref:l,style:i.value},[u("div",{class:Dt({fixed:t.fixed&&!c.value}),style:v.value},[(h=n.default)==null?void 0:h.call(n)])])}}});const Ft=U(Mt),[Ut,Ae]=E("tabs");var Vt=N({name:Ut,props:{count:ue(Number),inited:Boolean,animated:Boolean,duration:ue(B),swipeable:Boolean,lazyRender:Boolean,currentIndex:ue(Number)},emits:["change"],setup(e,{emit:a,slots:n}){const l=T(),s=r=>a("change",r),t=()=>{var r;const i=(r=n.default)==null?void 0:r.call(n);return e.animated||e.swipeable?u(Pt,{ref:l,loop:!1,class:Ae("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:s},{default:()=>[i]}):i},c=r=>{const i=l.value;i&&i.state.active!==r&&i.swipeTo(r,{immediate:!e.inited})};return W(()=>e.currentIndex,c),xe(()=>{c(e.currentIndex)}),te({swipeRef:l}),()=>u("div",{class:Ae("content",{animated:e.animated||e.swipeable})},[t()])}});const[je,oe]=E("tabs"),jt={type:ce("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:q(0),duration:q(.3),animated:Boolean,ellipsis:K,swipeable:Boolean,scrollspy:Boolean,offsetTop:q(0),background:String,lazyRender:K,showHeader:K,lineWidth:B,lineHeight:B,beforeChange:Function,swipeThreshold:q(5),titleActiveColor:String,titleInactiveColor:String},Ze=Symbol(je);var Zt=N({name:je,props:jt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:n}){let l,s,t,c,r;const i=T(),v=T(),b=T(),A=T(),h=Ne(),C=be(i),[d,_]=Et(),{children:m,linkChildren:O}=De(Ze),y=ye({inited:!1,position:"",lineStyle:{},currentIndex:-1}),V=P(()=>m.length>+e.swipeThreshold||!e.ellipsis||e.shrink),G=P(()=>({borderColor:e.color,background:e.background})),j=(o,f)=>{var w;return(w=o.name)!=null?w:f},J=P(()=>{const o=m[y.currentIndex];if(o)return j(o,y.currentIndex)}),H=P(()=>Le(e.offsetTop)),g=P(()=>e.sticky?H.value+l:0),x=o=>{const f=v.value,w=d.value;if(!V.value||!f||!w||!w[y.currentIndex])return;const I=w[y.currentIndex].$el,R=I.offsetLeft-(f.offsetWidth-I.offsetWidth)/2;c&&c(),c=Lt(f,R,o?0:+e.duration)},S=()=>{const o=y.inited;Z(()=>{const f=d.value;if(!f||!f[y.currentIndex]||e.type!=="line"||ie(i.value))return;const w=f[y.currentIndex].$el,{lineWidth:I,lineHeight:R}=e,L=w.offsetLeft+w.offsetWidth/2,Y={width:re(I),backgroundColor:e.color,transform:`translateX(${L}px) translateX(-50%)`};if(o&&(Y.transitionDuration=`${e.duration}s`),se(R)){const ne=re(R);Y.height=ne,Y.borderRadius=ne}y.lineStyle=Y})},$=o=>{const f=o<y.currentIndex?-1:1;for(;o>=0&&o<m.length;){if(!m[o].disabled)return o;o+=f}},k=(o,f)=>{const w=$(o);if(!se(w))return;const I=m[w],R=j(I,w),L=y.currentIndex!==null;y.currentIndex!==w&&(y.currentIndex=w,f||x(),S()),R!==e.active&&(a("update:active",R),L&&a("change",R,I.title)),t&&!e.scrollspy&&He(Math.ceil(Te(i.value)-H.value))},p=(o,f)=>{const w=m.find((R,L)=>j(R,L)===o),I=w?m.indexOf(w):0;k(I,f)},M=(o=!1)=>{if(e.scrollspy){const f=m[y.currentIndex].$el;if(f&&C.value){const w=Te(f,C.value)-g.value;s=!0,r&&r(),r=Wt(C.value,w,o?0:+e.duration,()=>{s=!1})}}},D=(o,f,w)=>{const{title:I,disabled:R}=m[f],L=j(m[f],f);R||(st(e.beforeChange,{args:[L],done:()=>{k(f),M()}}),ct(o)),a("clickTab",{name:L,title:I,event:w,disabled:R})},z=o=>{t=o.isFixed,a("scroll",o)},de=o=>{Z(()=>{p(o),M(!0)})},X=()=>{for(let o=0;o<m.length;o++){const{top:f}=F(m[o].$el);if(f>g.value)return o===0?0:o-1}return m.length-1},Ye=()=>{if(e.scrollspy&&!s){const o=X();k(o)}},qe=()=>{if(e.type==="line"&&m.length)return u("div",{class:oe("line"),style:y.lineStyle},null)},_e=()=>{var o,f,w;const{type:I,border:R,sticky:L}=e,Y=[u("div",{ref:L?void 0:b,class:[oe("wrap"),{[rt]:I==="line"&&R}]},[u("div",{ref:v,role:"tablist",class:oe("nav",[I,{shrink:e.shrink,complete:V.value}]),style:G.value,"aria-orientation":"horizontal"},[(o=n["nav-left"])==null?void 0:o.call(n),m.map(ne=>ne.renderTitle(D)),qe(),(f=n["nav-right"])==null?void 0:f.call(n)])]),(w=n["nav-bottom"])==null?void 0:w.call(n)];return L?u("div",{ref:b},[Y]):Y},ke=()=>{S(),Z(()=>{var o,f;x(!0),(f=(o=A.value)==null?void 0:o.swipeRef.value)==null||f.resize()})};W(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],S),W(Ee,ke),W(()=>e.active,o=>{o!==J.value&&p(o)}),W(()=>m.length,()=>{y.inited&&(p(e.active),S(),Z(()=>{x(!0)}))});const Ge=()=>{p(e.active,!0),Z(()=>{y.inited=!0,b.value&&(l=F(b.value).height),x(!0)})},Je=(o,f)=>a("rendered",o,f);return te({resize:ke,scrollTo:de}),lt(S),it(S),ze(Ge),Ve(i,S),le("scroll",Ye,{target:C,passive:!0}),O({id:h,props:e,setLine:S,scrollable:V,onRendered:Je,currentName:J,setTitleRefs:_,scrollIntoView:x}),()=>u("div",{ref:i,class:oe([e.type])},[e.showHeader?e.sticky?u(Ft,{container:i.value,offsetTop:H.value,onScroll:z},{default:()=>[_e()]}):_e():null,u(Vt,{ref:A,count:m.length,inited:y.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:y.currentIndex,onChange:k},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n)]}})])}});const Kt=Symbol(),[Xt,pe]=E("tab"),Yt=N({name:Xt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:B,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:K},setup(e,{slots:a}){const n=P(()=>{const s={},{type:t,color:c,disabled:r,isActive:i,activeColor:v,inactiveColor:b}=e;c&&t==="card"&&(s.borderColor=c,r||(i?s.backgroundColor=c:s.color=c));const h=i?v:b;return h&&(s.color=h),s}),l=()=>{const s=u("span",{class:pe("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||se(e.badge)&&e.badge!==""?u(dt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[s]}):s};return()=>u("div",{id:e.id,role:"tab",class:[pe([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:n.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[l()])}}),[qt,ve]=E("tab"),Gt=we({},ut,{dot:Boolean,name:B,badge:B,title:String,disabled:Boolean,titleClass:ft,titleStyle:[String,Object],showZeroBadge:K});var Jt=N({name:qt,props:Gt,setup(e,{slots:a}){const n=Ne(),l=T(!1),s=St(),{parent:t,index:c}=Me(Ze);if(!t)return;const r=()=>{var d;return(d=e.name)!=null?d:c.value},i=()=>{l.value=!0,t.props.lazyRender&&Z(()=>{t.onRendered(r(),e.title)})},v=P(()=>{const d=r()===t.currentName.value;return d&&!l.value&&i(),d}),b=T(""),A=T("");vt(()=>{const{titleClass:d,titleStyle:_}=e;b.value=d?yt(d):"",A.value=_&&typeof _!="string"?wt(xt(_)):_});const h=d=>u(Yt,Fe({key:n,id:`${t.id}-${c.value}`,ref:t.setTitleRefs(c.value),style:A.value,class:b.value,isActive:v.value,controls:n,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:_=>d(s.proxy,c.value,_)},Ce(t.props,["type","color","shrink"]),Ce(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),C=T(!v.value);return W(v,d=>{d?C.value=!1:ht(()=>{C.value=!0})}),W(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),mt(Kt,v),te({id:n,renderTitle:h}),()=>{var d;const _=`${t.id}-${c.value}`,{animated:m,swipeable:O,scrollspy:y,lazyRender:V}=t.props;if(!a.default&&!m)return;const G=y||v.value;if(m||O)return u(Ot,{id:n,role:"tabpanel",class:ve("panel-wrapper",{inactive:C.value}),tabindex:v.value?0:-1,"aria-hidden":!v.value,"aria-labelledby":_},{default:()=>{var H;return[u("div",{class:ve("panel")},[(H=a.default)==null?void 0:H.call(a)])]}});const J=l.value||y||!V?(d=a.default)==null?void 0:d.call(a):null;return gt(u("div",{id:n,role:"tabpanel",class:ve("panel"),tabindex:G?0:-1,"aria-labelledby":_},[J]),[[bt,G]])}}});const Qt=U(Jt),en=U(Zt);function tn(){return Array(26).fill("").map((n,l)=>String.fromCharCode(65+l))}const[Ke,he]=E("index-bar"),nn={sticky:K,zIndex:B,teleport:[String,Object],highlightColor:String,stickyOffsetTop:Tt(0),indexList:{type:Array,default:tn}},Xe=Symbol(Ke);var an=N({name:Ke,props:nn,emits:["select","change"],setup(e,{emit:a,slots:n}){const l=T(),s=T(),t=T(""),c=_t(),r=be(l),{children:i,linkChildren:v}=De(Xe);let b;v({props:e});const A=P(()=>{if(se(e.zIndex))return{zIndex:+e.zIndex+1}}),h=P(()=>{if(e.highlightColor)return{color:e.highlightColor}}),C=(g,x)=>{for(let S=i.length-1;S>=0;S--){const $=S>0?x[S-1].height:0,k=e.sticky?$+e.stickyOffsetTop:0;if(g+k>=x[S].top)return S}return-1},d=g=>i.find(x=>String(x.index)===g),_=()=>{if(ie(l))return;const{sticky:g,indexList:x}=e,S=ee(r.value),$=F(r),k=i.map(M=>M.getRect(r.value,$));let p=-1;if(b){const M=d(b);if(M){const D=M.getRect(r.value,$);p=C(D.top,k)}}else p=C(S,k);t.value=x[p],g&&i.forEach((M,D)=>{const{state:z,$el:de}=M;if(D===p||D===p-1){const X=de.getBoundingClientRect();z.left=X.left,z.width=X.width}else z.left=null,z.width=null;if(D===p)z.active=!0,z.top=Math.max(e.stickyOffsetTop,k[D].top-S)+$.top;else if(D===p-1&&b===""){const X=k[p].top-S;z.active=X>0,z.top=X+$.top-k[D].height}else z.active=!1}),b=""},m=()=>{Z(_)};le("scroll",_,{target:r,passive:!0}),xe(m),W(()=>e.indexList,m),W(t,g=>{g&&a("change",g)});const O=()=>e.indexList.map(g=>{const x=g===t.value;return u("span",{class:he("index",{active:x}),style:x?h.value:void 0,"data-index":g},[g])}),y=g=>{b=String(g);const x=d(b);if(x){const S=ee(r.value),$=F(r),{offsetHeight:k}=document.documentElement;if(x.$el.scrollIntoView(),S===k-$.height){_();return}e.sticky&&e.stickyOffsetTop&&He(Ue()-e.stickyOffsetTop),a("select",x.index)}},V=g=>{const{index:x}=g.dataset;x&&y(x)},G=g=>{V(g.target)};let j;const J=g=>{if(c.move(g),c.isVertical()){Ct(g);const{clientX:x,clientY:S}=g.touches[0],$=document.elementFromPoint(x,S);if($){const{index:k}=$.dataset;k&&j!==k&&(j=k,V($))}}},H=()=>u("div",{ref:s,class:he("sidebar"),style:A.value,onClick:G,onTouchstartPassive:c.start},[O()]);return te({scrollTo:y}),le("touchmove",J,{target:s}),()=>{var g;return u("div",{ref:l,class:he()},[e.teleport?u(kt,{to:e.teleport},{default:()=>[H()]}):H(),(g=n.default)==null?void 0:g.call(n)])}}});const[on,ln]=E("index-anchor"),rn={index:B};var sn=N({name:on,props:rn,setup(e,{slots:a}){const n=ye({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),l=T(),{parent:s}=Me(Xe);if(!s)return;const t=()=>n.active&&s.props.sticky,c=P(()=>{const{zIndex:i,highlightColor:v}=s.props;if(t())return we(We(i),{left:n.left?`${n.left}px`:void 0,width:n.width?`${n.width}px`:void 0,transform:n.top?`translate3d(0, ${n.top}px, 0)`:void 0,color:v})});return te({state:n,getRect:(i,v)=>{const b=F(l);return n.rect.height=b.height,i===window||i===document.body?n.rect.top=b.top+Ue():n.rect.top=b.top+ee(i)-v.top,n.rect}}),()=>{const i=t();return u("div",{ref:l,style:{height:i?`${n.rect.height}px`:void 0}},[u("div",{style:c.value,class:[ln({sticky:i}),{[Rt]:i}]},[a.default?a.default():e.index])])}}});const cn=U(sn),dn=U(an),[un,fn]=E("skeleton-title"),vn={round:Boolean,titleWidth:B};var hn=N({name:un,props:vn,setup(e){return()=>u("h3",{class:fn([{round:e.round}]),style:{width:re(e.titleWidth)}},null)}});const mn=U(hn);var gn=mn;const[bn,yn]=E("skeleton-avatar"),wn={avatarSize:B,avatarShape:ce("round")};var xn=N({name:bn,props:wn,setup(e){return()=>u("div",{class:yn([e.avatarShape]),style:$t(e.avatarSize)},null)}});const Sn=U(xn);var _n=Sn;const Se="100%",kn={round:Boolean,rowWidth:{type:B,default:Se}},[Tn,Cn]=E("skeleton-paragraph");var Rn=N({name:Tn,props:kn,setup(e){return()=>u("div",{class:Cn([{round:e.round}]),style:{width:e.rowWidth}},null)}});const $n=U(Rn);var In=$n;const[Bn,Pe]=E("skeleton"),An="60%",pn={row:q(0),round:Boolean,title:Boolean,titleWidth:B,avatar:Boolean,avatarSize:B,avatarShape:ce("round"),loading:K,animate:K,rowWidth:{type:[Number,String,Array],default:Se}};var Pn=N({name:Bn,inheritAttrs:!1,props:pn,setup(e,{slots:a,attrs:n}){const l=()=>{if(e.avatar)return u(_n,{avatarShape:e.avatarShape,avatarSize:e.avatarSize},null)},s=()=>{if(e.title)return u(gn,{round:e.round,titleWidth:e.titleWidth},null)},t=i=>{const{rowWidth:v}=e;return v===Se&&i===+e.row-1?An:Array.isArray(v)?v[i]:v},c=()=>Array(+e.row).fill("").map((i,v)=>u(In,{key:v,round:e.round,rowWidth:re(t(v))},null)),r=()=>a.template?a.template():u(ge,null,[l(),u("div",{class:Pe("content")},[s(),c()])]);return()=>{var i;return e.loading?u("div",Fe({class:Pe({animate:e.animate,round:e.round})},n),[r()]):(i=a.default)==null?void 0:i.call(a)}}});const On=U(Pn),zn={class:"flex justify-around flex-wrap"},Ln={class:"tracking-widest"},Dn={__name:"CategoryPage",setup(e){const{artistsList:a}=It(),n=Bt(),l=T(0),s=T(!0);xe(()=>{s.value=!1});const t=["華語","西洋","JPOP","KPOP","台語","搖滾"];return(c,r)=>{const i=cn,v=pt,b=On,A=dn,h=Qt,C=en;return ae(),Re(zt,{"is-search":!0},{default:Q(()=>[u(C,{active:l.value,"onUpdate:active":r[0]||(r[0]=d=>l.value=d)},{default:Q(()=>[u(h,{title:"歌手"},{default:Q(()=>[u(A,null,{default:Q(()=>[u(i,{index:"L"}),u(b,{title:"",row:3,loading:s.value},{default:Q(()=>[(ae(!0),$e(ge,null,Ie(Be(a),d=>(ae(),Re(v,{onClick:_=>Be(n).push(`/artist/${d.id}`),key:d.id,title:d.name},null,8,["onClick","title"]))),128))]),_:1},8,["loading"])]),_:1})]),_:1}),u(h,{title:"歌曲"},{default:Q(()=>[fe("div",zn,[(ae(),$e(ge,null,Ie(t,d=>fe("div",{key:d.id,class:"w-2/5 my-4 h-20 rounded-md bg-stone-600 flex justify-center items-center"},[fe("p",Ln,At(d),1)])),64))])]),_:1})]),_:1},8,["active"])]),_:1})}}};export{Dn as default};
